// Данные для заданий 14-27
const tasksData2 = {
    14: {
        title: "Задание 14",
        description: "Также есть несколько прототипов",
        tasks: [
            {
                text: `Значение арифметического выражения 5^2025 + 5^200 - x, где х – натуральное число в диапазоне от 2 до 2025, записали в системе счисления с основанием 5. Определите максимальное значение x, при котором данная запись содержит наибольшее количество цифр «4».`,
                code: `#в этом коде находим максимальное количество 4
m = []
for a in range(2,2025+1):
    x = 5**2025 + 5**200 - a
    k4 = 0
    while x>0:
        if x%5==4: k4 += 1
        x = x//5
    m.append(k4)
print(max(m))`,
                additionalCode: `#в этом коде поймем, какой х соответствует 199
for a in range(2,2025+1):
    x = 5**2025 + 5**200 - a
    k4 = 0
    while x>0:
        if x%5==4: k4 += 1
        x = x//5
    if k4==199:
        print(a)`
            },
            {
                text: `Операнды арифметического выражения записаны в системах счисления с основаниями 21.

12yx921+36y9921

В записи чисел переменными x и y обозначены неизвестные цифры из алфавита 21-ричной системы счисления. Определите наименьшее значение x, при которых значение данного арифметического выражения кратно 1810 при любом значении y. Для найденного значения x вычислите частное от деления значения арифметического выражения на 1810 при y=5 и укажите его в ответе в десятичной системе счисления.`,
                code: `for x in '0123456789abcdefghijk':
    for y in '0123456789abcdefghijk':
        a = int(f'12{y}{x}9',21)+int(f'36{y}99',21)
        if a%18==0:
            print(x,y,a//18)`
            }
        ]
    },
    15: {
        title: "Задание 15",
        description: "Решаем тоже через питон",
        tasks: [
            {
                text: `Обозначим через УГОЛ(a, b, c) утверждение «значения чисел a, b, c являются углами невырожденного треугольника». Для какого наименьшего натурального числа А формула:

УГОЛ(37,A,x+45)≡УГОЛ(A,x,90)∧¬(A+23<120)

тождественно истинна (т.е. принимает значение 1) при любом натуральном значении переменной х?`,
                code: `#функция, которая проверяет сумму углов треугольника
def ug(a,b,c):
    return a+b+c==180
# заданная логическая функция
def f(x,a):
    return ug(37,a,x+45) == (ug(a,x,90) and not (a+23<120))
# перебор для поиска тождественно истинного значения
for a in range(1,100):
    if all(f(x,a)==1 for x in range(1,10000)):
        print(a)`
            },
            {
                text: `На числовой прямой даны три отрезка: P=[5,280], Q=[295,400] и R=[375,450]. Какова наименьшая длина отрезка A, при котором формула

((x∈Q)→(x∈P))∨(¬(x∈A)→(x∈R))

тождественно истинна, то есть принимает значение 1 при любом значении переменной х?`,
                code: `def f(x):
    P = 5<=x<=280
    Q = 295<=x<=400
    R = 375<=x<=450
    A = a1<=x<=a2
    return (Q <= P) or ((not A)<=R)
# составляем список чисел у, которые будут проверяться
d = [y for x in (5,280,295,400,375,450) for y in (x,x+0.0001,x-0.0001)]
# список для сохранения длин подходящих отрезков
m = []
for a1 in d:
    for a2 in d:
        if a2>=a1 and all(f(x)==1 for x in d):
            m.append(a2-a1)
print(min(m))`
            }
        ]
    },
    16: {
        title: "Задание 16",
        description: "Простое задание на функции",
        task: `Алгоритм вычисления значения функции F(n) и G(n), где n – целое число, задан следующими соотношениями:
F(n)=G(n−1);
G(n)=3×n, если n≤9.
G(n)=G(n−2)+1, если n>9.
Чему равно значение выражения F(47995)?`,
        code: `from functools import *
 #почти универсальный код, если превышает рекурсия
@lru_cache(None)
def f(n):
    return g(n-1)

@lru_cache(None)
def g(n):
    if n<=9: return 3*n
    return g(n-2)+1
 #вот этот цикл обязательно
for i in range(9,47995): g(i)

print(f(47995))`
    },
    17: {
        title: "Задание 17",
        description: "Сорян, я пока что не знаю как это решать",
        code: null
    },
    18: {
        title: "Задание 18",
        description: "Его решаем через таблицу",
        code: null
    },
    19: {
        title: "Задания 19-21",
        description: "Код для этих заданий один",
        task: `Два игрока, Петя и Ваня, играют в следующую игру. Перед игроками лежит куча камней. Игроки ходят по очереди, первый ход делает Петя. За один ход игрок может добавить в кучу два камня или увеличить количество камней в куче в два раза. У каждого игрока есть неограниченное количество камней, чтобы делать ходы.
Игра завершается в тот момент, когда количество камней в куче становится не менее 54. Победителем считается игрок, сделавший последний ход, т.е. первым получивший кучу из 54 или больше камней. В начальный момент в куче было S камней; 1 ≤ S ≤ 53.
Будем говорить, что игрок имеет выигрышную стратегию, если он может выиграть при любых ходах противника.

19. Укажите минимальное значение S, при котором Петя не может выиграть за один ход, но при любом ходе Пети Ваня может выиграть своим первым ходом.
20. Найдите два наименьших значения S, при которых у Пети есть выигрышная стратегия, причём одновременно выполняются два условия:
− Петя не может выиграть за один ход;
− Петя может выиграть своим вторым ходом независимо от того, как будет ходить Ваня.
21. Найдите значение S, при котором одновременно выполняются два условия:
– у Вани есть выигрышная стратегия, позволяющая ему выиграть первым или вторым ходом при любой игре Пети;
– у Вани нет стратегии, которая позволит ему гарантированно выиграть первым ходом.
Если найдено несколько значений S, в ответе запишите наименьшее из них.`,
        code: `def f(s,m):
    if s>=54: return m%2==0
    if m==0: return 0
    h = [f(s+2,m-1),f(s*2,m-1)]
    return any(h) if (m-1)%2==0 else all(h)

print(19, [s for s in range(1,54) if f(s,2)])
print(20, [s for s in range(1,54) if not f(s,1) and f(s,3)])
print(21, [s for s in range(1,54) if not f(s,2) and f(s,4)])`
    },
    20: {
        title: "Задание 20",
        description: "Смотри задание 19",
        code: null
    },
    21: {
        title: "Задание 21",
        description: "Смотри задание 19",
        code: null
    },
    22: {
        title: "Задание 22",
        description: "Решается через таблицу",
        code: null
    },
    23: {
        title: "Задание 23",
        description: "Тоже простое задание",
        task: `Исполнитель преобразует число на экране. У исполнителя есть три команды, которые обозначены латинскими буквами:
А. Вычесть 1
В. Вычесть 3
С. Найти целую часть от деления на 2
Программа для исполнителя — это последовательность команд.
Сколько существует программ, для которых при исходном числе 19 результатом является число 3, при этом траектория вычислений не содержит числа 7 и содержит 10?`,
        code: `def f(c,e):
    if c<e or c==7: return 0
    if c==e: return 1
    if c>e: return f(c-1,e)+f(c-3,e)+f(c//2,e)
 #если содержит 10, значит просто два раза функцию до 10 и после 10
print(f(19,10)*f(10,3))`
    },
    24: {
        title: "Задание 24",
        description: "Пока что тоже не умею решать",
        code: null
    },
    25: {
        title: "Задание 25",
        description: "Знаю пару прототипов",
        tasks: [
            {
                text: `Назовём маской числа последовательность цифр, в которой также могут встречаться следующие символы:

- символ «Ч» означает ровно одну произвольную чётную цифру;
- символ «Н» означает ровно одну произвольную нечётную цифру.

Например, маске НЧ3 соответствуют числа 723, 943, 183 и т.д. Среди натуральных чисел, не превышающих 10^9, найдите все числа, соответствующие маске ЧНЧЧНЧН77, делящиеся на 7777 без остатка. В ответе запишите в первом столбце таблицы все найденные числа в порядке возрастания, а во втором столбце – соответствующие им результаты деления этих чисел на 7777.
Количество строк в таблице для ответа избыточно.`,
                code: `from itertools import *

a = []

for a1,a2,a3,a4 in product('02468',repeat=4):
    for b1,b2,b3 in product('13579',repeat=3):
        x = int(f'{a1}{b1}{a2}{a3}{b2}{a4}{b3}77')
        if a1!='0' and x%7777==0:
            a.append(x)

a.sort()
for x in a:
    print(x,x//7777)`
            },
            {
                text: `Напишите программу, которая ищет среди целых чисел, превышающих 300000, первые четыре числа, удовлетворяющих условию: количество делителей, кратных трём и не равных самому числу, равно пяти.
В ответе запишите четыре пары чисел в порядке возрастания первых чисел в паре: число и максимальный делитель, кратный трём и не равный самому числу.
Количество строк в таблице для ответа избыточно.`,
                code: `def div(x):
    d = set()
    for i in range(2,int(x**0.5)+1):
        if x%i==0:
            d.add(i)
            d.add(x//i)
    return sorted(d)

for x in range(300001,301000):
    d = [i for i in div(x) if i%3==0]
    if len(d)==5:
        print(x,max(d))`
            }
        ]
    },
    26: {
        title: "Задание 26",
        description: "Оно какое-то страшное",
        code: null
    },
    27: {
        title: "Задание 27",
        description: "Обещаю, как нибудь я его разберу",
        code: null
    }
};

// Функция открытия задания из второго файла
function openTaskFromFile2(taskNumber) {
    const content = document.getElementById('content');
    const task = tasksData2[taskNumber];

    // Убираем активный класс со всех кнопок
    document.querySelectorAll('.task-btn').forEach(btn => {
        btn.classList.remove('active');
    });

    // Добавляем активный класс к выбранной кнопке
    document.querySelectorAll('.task-btn')[taskNumber - 1].classList.add('active');

    // Формируем HTML с текстом задачи, если он есть
    let taskHTML = '';
    if (task.task) {
        taskHTML = `
            <div class="task-box">
                <h3>Текст задачи</h3>
                <p>${task.task.replace(/\n/g, '<br>')}</p>
            </div>
        `;
    }

    // Формируем HTML с кодом, если он есть
    let codeHTML = '';
    if (task.code) {
        codeHTML = `
            <div class="code-container">
                <div class="code-header">
                    <span>Python</span>
                    <button class="copy-btn" onclick="copyCode(this, 'code-${taskNumber}')">Копировать</button>
                </div>
                <div class="code-block">
                    <pre id="code-${taskNumber}">${task.code}</pre>
                </div>
            </div>
        `;
    }

    // Формируем HTML с множественными задачами
    let tasksHTML = '';
    if (task.tasks) {
        tasksHTML = task.tasks.map((item, index) => {
            let itemHTML = `
                <div class="task-box">
                    <h3>Задача ${index + 1}</h3>
                    <p>${item.text.replace(/\n/g, '<br>')}</p>
                </div>
                <div class="code-container">
                    <div class="code-header">
                        <span>Python</span>
                        <button class="copy-btn" onclick="copyCode(this, 'code-${taskNumber}-${index}')">Копировать</button>
                    </div>
                    <div class="code-block">
                        <pre id="code-${taskNumber}-${index}">${item.code}</pre>
                    </div>
                </div>
            `;

            // Добавляем дополнительный код, если он есть
            if (item.additionalCode) {
                itemHTML += `
                    <div class="code-container">
                        <div class="code-header">
                            <span>Python (второй код)</span>
                            <button class="copy-btn" onclick="copyCode(this, 'code-${taskNumber}-${index}-add')">Копировать</button>
                        </div>
                        <div class="code-block">
                            <pre id="code-${taskNumber}-${index}-add">${item.additionalCode}</pre>
                        </div>
                    </div>
                `;
            }

            return itemHTML;
        }).join('');
    }

    // Отображаем содержимое задания
    content.innerHTML = `
        <div class="task-content">
            <div class="task-header">
                <h2>${task.title}</h2>
            </div>

            <div class="task-description">
                <h3>Пояснение</h3>
                <p>${task.description}</p>
            </div>

            ${taskHTML}
            ${codeHTML}
            ${tasksHTML}
        </div>
    `;

    // Плавная прокрутка наверх
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
